databaseChangeLog:
  - changeSet:
      id: create-workspace-utilities-table
      author: zavyalov-daniil
      changes:
        - createTable:
            tableName: workspace_booking
            columns:
              - column:
                  name: owner_id
                  type: uuid
              - column:
                  name: workspace_id
                  type: uuid
              - column:
                  name: id
                  type: uuid
                  constraints:
                    primaryKey: true
                    primaryKeyName: pk_workspace_booking
              - column:
                  name: begin
                  type: timestamp
              - column:
                  name: end
                  type: timestamp
        - addForeignKeyConstraint:
            baseTableName: workspace_booking
            baseColumnNames: owner_id
            referencedTableName: users
            referencedColumnNames: id
            constraintName: fk_workspace_booking_owner
        - addForeignKeyConstraint:
            baseTableName: workspace_booking
            baseColumnNames: workspace_id
            referencedTableName: workspaces
            referencedColumnNames: id
            constraintName: fk_booking_workspace_id

  - changeSet:
      id: create-booking_participants-table
      author: zavyalov-daniil
      changes:
        - createTable:
            tableName: booking_participants
            columns:
              - column:
                  name: user_id
                  type: uuid
              - column:
                  name: booking_id
                  type: uuid
        - addPrimaryKey:
            tableName: booking_participants
            columnNames: user_id, booking_id
            constraintName: pk_booking_participants
        - addForeignKeyConstraint:
            baseTableName: booking_participants
            baseColumnNames: user_id
            referencedTableName: users
            referencedColumnNames: id
            constraintName: fk_booking_participant_id
        - addForeignKeyConstraint:
            baseTableName: booking_participants
            baseColumnNames: booking_id
            referencedTableName: workspace_booking
            referencedColumnNames: id
            constraintName: fk_participants_workspace_booking_id
